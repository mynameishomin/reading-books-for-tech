# HTTP 개관

## 웹 클라이언트와 서버

전 세계의 웹브라우저, 서버, 웹 애플리케이션은 모두 HTTP를 통해 대화한다. 여기서 클라이언트와 서버로 나뉘게 되는데 클라이언트는 서버에게 HTTP 요청을 보내고 서버는 요청받은 데이터를 HTTP 응답으로 돌려준다. 이것이 월드 와이드 웹의 기본 요소.

## 리소스

서버가 클라이언트에게 응답으로 제공하는 리소스가 웹 콘텐츠의 원천인데 웹 리소스는 가장 간단한 정적파일인 텍스트, HTML, 워드 파일 등부터 주식 거래, 실시간 스트리밍 등 요청에 따라 콘텐츠를 생산하는 프로그램이 될 수도 있다.

HTTP에서는 수많은 데이터 타입을 다루기 때문에 웹에서 전송되는 객체에 MIME(Multipurpose Internet Mail Extensions, 다목적 인터넷 메일 확장) 타입을 붙인다. 원래 이메일을 위해 설계되었지만 HTTP에서도 멀티미디어 콘텐츠를 기술하고 라벨을 붙이기 위해 채택되었다.

웹 서버는 모든 HTTP 객체 데이터에 MIME 타입을 붙이는데 브라우저는 MIME 타입을 통해 응답받은 객체가 다룰 수 있는 객체인지 확인한다. 다룰 수 있는 타입인 경우 이미지 파일을 보여주거나 HTML을 랜더링하고 오디오 파일을 재생하는 작업을 한다.

**MIME 타입 예시**

```
Content-type: image/jpeg
Content-length: 12984
```

MIME는 `주타입/부타입`으로 구성되는데 예를들면 아래와 같다.

-   HTML로 작성된 텍스트 문서 **text/html**
-   plain ASCII 텍스트 문서 **text/plain**
-   JPEG 이미지 **image/jpeg**
-   GIF 이미지 **image/gif**

## URI

웹 서버에서 리소스 각자는 이름을 갖고 있다. 따라서 클라이언트는 원하는 리소스를 선택할 수 있다. 서버 리소스 이름은 URI(uniform resource identifier, 통합 자원 식별자)로 불린다.

> **예시**  
> 죠의 컴퓨터 가게 서버에 있는 GIF 형식의 그림 리소스에 대한 URI  
> `http://www.joes-hardware.com/specials/saw-blade.gif`

1. HTTP 프로토콜을 사용하라.
2. www.joes-hardware.com으로 이동하라.
3. /specials/saw-blade.gif 리소스를 가져와라.

이 URI는 URL, URN으로 나뉘는데 URL은 URI의 가장 흔한 형태로 리소스가 정확히 어디에 있고 어떻게 접근할 수 있는지 분명하게 알려준다.

> 예시  
> | URL | 설명|
> |---|---|
> | http://www.oreilly.com/index.html| 오라일리 출판사 홈페이지 URL
> |http://www.yahoo.com/images/logo.gif | 야후! 웹 사이트로고 URL
> |http://www.joes-hardware.com/inventory-check.cgi?item=12732 | 물품 #12732의 재고가 있는지 확인하는 프로그램에 대한 URL
> |ftp://joe:tools4u@ftp.jose-hardware.com/locking-pliers.gif | 비밀번호로 보호되는 FTP를 통해 locking-pliers.gif 이미지 파일에 접근하는 URL

오늘날 대부분의 URI는 URL이다.

URN은 콘텐츠를 이루는 한 리소스에 대해 그 리소스의 위치와 상관 없이 독립적인 URN으로 접근할 수 있는 유일한 이름이다.

```
urn:ietf:rfc:2141
```

위 URN은 인터넷 표준 문서 `RFC 2141`이 어디에 있거나 상관 없이(여러 군데에 복사된 게 있어도) 정확히 지칭할 수 있다.

URN은 아직 실험단계에 있으며 보통 URI와 URL의 같은 뜻으로 쓴다.

## 트랜잭션

HTTP 트랜잭션은 요청 명령과 응답 결과로 이루어져 있다.

### 메서드

HTTP는 HTTP 메서드라고 불리는 여러 요청 명령을 지원한느데 모든 HTTP 요청 메시지는 한 개의 메서드를 갖는다.

> **HTTP 메서드 예시**
> | HTTP 메서드 | 설명 |
> | ----------- | -------------------------------------------------------------------- |
> | GET | 서버에서 클라이언트로 지정한 리소스를 보내라. |
> | PUT | 클라이언트에서 서버로 보낸 데이터를 지정한 이름의 리소스로 저장하라. |
> | DELETE | 지정한 리소스를 서버에서 삭제하라. |
> | POST | 클라이언트 데이터를 서버 게이트웨이 애플리케이션으로 보내라. |
> | HEAD | 지정한 리소스에 대한 응답에서, HTTP 헤더 부분만 보내라. |

### 상태 코드

모든 HTTP 응답 메시지는 상태 코드와 함께 반환된다. 이는 클라이언트에게 요청 성공 혹은 추가 조치가 필요한지 알려주는 세 자리 숫자다.

> **HTTP 상태 코드 예시**
> | HTTP 상태코드| 설명|
> |-|-|
> |200|좋다. 문서가 바르게 반환되었다.
> |302| 다시 보내라. 다른 곳에 가서 리소스를 가져가라.
> |404|없음. 리소스를 찾을 수 없다.

## 웹 페이지는 여러 객체로 이루어질 수 있다.

웹 페이지는 보통 여러 HTTP 트랜잭션을 수행하는데 웹 페이지의 뼈대인 HTML을 한 번의 트랜잭션으로 가져온 여러 이미지, JS, CSS 파일 등을 가져오기 위해 추가로 HTTP 트랜잭션을 수행한다.

## 메시지

HTTP 요청과 응답 메시지는 사람이 읽고 쓰기 쉬운 일반 텍스트로 쓰인다.

> HTTP 메시지 예시
> |요청 메시지 | | 응답 메시지|
> | -| -| -|
> |GET /test/hi/there.txt HTTP/1.0 | 시작줄 |HTTP/1.0 200 OK |
> |Accept: text/\*<br>Accept-Language: en,fr | 헤더 | Content-type: text/plain<br>Contetn-length: 19 <br><br> |
> || 본문| Hi! I'm a message!

-   **시작줄**  
    요청이라면 무엇을 해야 하는지 응답이라면 무슨 일이 일어났는지 나타낸다.

-   **헤더**  
     헤더에는 0개 이상의 헤더 필드가 들어가는데 각 필드는 `:`로 구분되는 키, 값 쌍으로 구성된다. 헤더 마지막은 빈 줄로 끝난다.

-   **본문**  
    어떤 종류의 데이터든 들어갈 수 있다. 요청의 본문은 웹 서버로 데이터를 실어보내며 응답의 본문은 클라이언트로 데이터를 반환한다. 본문은 이진 데이터(이미지, 비디오, 오디오 등)가 들어갈 수 있고 일반 텍스트도 들어갈 수 있다.
